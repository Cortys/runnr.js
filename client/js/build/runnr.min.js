"use strict";angular.module("runnr.js",["core","top","panes","themes","ngAnimate"]),angular.module("core",[]),angular.module("panes",["core","plugins"]),angular.module("plugins",["core"]),angular.module("themes",[]),angular.module("top",["panes","core"]),function(){function a(a){var b=this;b.title="",a.getTheme().then(function(a){b.theme=a})}angular.module("core").controller("MetaController",a),a.$inject=["themes.theme"]}(),function(){function a(a){function b(){this.states=[]}return b.prototype={states:null,lastMove:0,validateState:function(b,c){return a.isAppendable()?b:new a(b,c?void 0:this.states.length)},pushState:function(a){this.states.push(this.validateState(a)),this.lastMove=1},replaceState:function(a){this.states=[],this.pushState(a),this.lastMove=0},backBy:function(a){void 0===a&&(a=1),isNaN(a)||(this.states=this.states.slice(0,Math.max(this.states.length-a,0)),this.lastMove=-a)},backTo:function(a){isNaN(a)||(a=Math.min(a,this.states.length-1),this.lastMove=a-this.states.length,this.states=this.states.slice(0,a+1))},getState:function(a){return void 0===a&&(a=0),isNaN(a)?void 0:this.states[this.states.length-1-a]},getStates:function(a){return isNaN(a)?void 0:this.states.slice(-a)}},b}angular.module("core").factory("core.History",a),a.$inject=["core.State"]}(),function(){function a(){function a(b,c){this.data=a.isState(b)?state.data:b,Object.defineProperty(this,"id",{get:function(){return c},set:function(a){void 0==c&&(c=a)}})}return a.prototype={isIdentified:function(){return null!==this.id}},a.isState=function(b){return b instanceof a},a.isAppendable=function(b){return a.isState(b)&&b.isIdentified()},a}angular.module("core").factory("core.State",a),a.$inject=[]}(),function(){function a(a){var b={get:function(b){return a.post("/api/"+b,{api:!0})}};return b}angular.module("core").factory("core.api",a),a.$inject=["$http"]}(),function(){function a(a,b){this.history=b}angular.module("panes").controller("panes.PanesController",a),a.$inject=["$scope","panes.history"],a.prototype={history:null}}(),function(){function a(a){var b=new a;return b.validateState=function(b){return b=a.prototype.validateState(b,!0),b.id=this.states.length+b.data.text,b},b}angular.module("panes").factory("panes.history",a),a.$inject=["core.History"]}(),function(){function a(){function a(a,b){a.plugin().client.html.then(function(a){var c=document.createElement("iframe");c.srcdoc=a.data,c.sandbox="allow-scripts",c.setAttribute("seamless",""),b.append(c),b.attr("loaded","")},function(){b.attr("failed","")})}return{restrict:"E",scope:{plugin:"&plugin"},terminal:!0,link:a}}angular.module("plugins").directive("pluginRenderer",a),a.$inject=["$http","$compile"]}(),function(){function a(a){function b(b){this.id=b,this.client=a.client(b),console.log(b)}return b.prototype={name:null,id:null,onInitialized:null,client:null},b.isPlugin=function(a){return a instanceof b},b}angular.module("plugins").factory("plugins.Plugin",a),a.$inject=["plugins.api"]}(),function(){function a(a){var b={client:function(b){return{get html(){return a.get("plugins/"+b+"/client/html")}}}};return b}angular.module("plugins").factory("plugins.api",a),a.$inject=["core.api"]}(),function(){function a(a,b,c){return{restrict:"A",compile:function(){var d=a.defer(),e=a.defer();return c.addRenderingPromise(a.all([d.promise,e.promise])),{pre:function(a,c,d){b(function(){e.resolve()},1*d.preloadThemeLinkingDelay)},post:function(){d.resolve()}}}}}angular.module("themes").directive("preloadThemeLinkingDelay",a),a.$inject=["$q","$timeout","themes.theme"]}(),function(){function a(a){return{restrict:"A",scope:{},link:function(b,c){a.rendered().then(function(){b.$destroy()}),b.$on("$destroy",function(){c.remove()})}}}angular.module("themes").directive("showOnThemePreload",a),a.$inject=["themes.theme"]}(),function(){function a(a,b,c){return{restrict:"E",scope:{},priority:3e3,link:function(d,e,f){if(!f.ngInclude){var g=b.defer();c.addRenderingPromise(g.promise),c.getTheme().then(function(b){e.attr("ng-include","'api/theme/"+(d.$eval(f.src)||b.html)+"'"),e.removeAttr("src"),a(e)(d)}),d.$on("$includeContentLoaded",g.resolve),d.$on("$includeContentError",g.reject)}}}}angular.module("themes").directive("themeInclude",a),a.$inject=["$compile","$q","themes.theme"]}(),function(){function a(a,b,c){return{restrict:"A",transclude:"element",terminal:!0,priority:3001,link:function(a,b){c.getTheme().then(function(a){var c=angular.element(document.createElement("link"));c.attr("rel","stylesheet"),c.attr("type","text/css"),a.css.forEach(function(a){c.attr("href","api/theme/"+a.file),c.attr("media",a.media||void 0),b.after(c),c=c.clone()})})}}}angular.module("themes").directive("themeLink",a),a.$inject=["$compile","$q","themes.theme"]}(),function(){function a(a,b){var c={getTheme:function(){return d},rendered:function(){return e.promise},addRenderingPromise:function(a){f++,a.then(function(){--f<=0&&e.resolve()},function(){e.reject()})}},d=a.get("/api/theme/manifest",{responseType:"json"}).then(function(a){return a.data}),e=b.defer(),f=0;return c.addRenderingPromise(d),c}angular.module("themes").factory("themes.theme",a),a.$inject=["$http","$q"]}(),function(){function a(){}angular.module("top").controller("top.ActionController",a),a.$inject=[],a.prototype={actions:[{name:"settings",clicked:function(){}}]}}(),function(){function a(a,b){this.panesHistory=a,this.items=[{text:"Runners",name:"runners",plugin:new b("runners")},{text:"Plugins",name:"plugins",plugin:new b("plugins")}],this.activateItem(this.items[1])}angular.module("top").controller("top.MenuController",a),a.$inject=["panes.history","plugins.Plugin"],a.prototype={activeItem:null,panesHistory:null,items:[],activateItem:function(a){this.activeItem=a,this.panesHistory.replaceState(a)}}}();